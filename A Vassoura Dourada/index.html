<!DOCTYPE html>
<html>
	<head> 
		<title>A Vassoura Dourada</title>
		<link rel="icon" href="resources/images/icon/icon.png">
		<link rel="stylesheet" href="resources/css/style.css">
	</head>
	<body>
		<header id="header">
			<img src="resources/images/logo.png" id="logo" width="479" height="166">
		
			<div id="inf">
				<p> Jogo desenvolvido para Oficina Integrada NAVE-2014 </p>
				<p><a href="http://www.github.com/thiagosemjoelho/oficinaintegrada-2014"> C&oacutedigo Fonte </a></p>
			</div>
		</header>
		
		<canvas canvas id="canvas" width="800" height="600"></canvas>
		
		<script src="resources/js/manager.js"></script>
		<script src="resources/js/musicManager.js"></script>
		<script src="resources/js/enemiesManager.js"></script>
		<script src="resources/js/menu.js"></script>
		<script src="resources/js/levelOne.js"></script>
		<script src="resources/js/levelTwo.js"></script>
		<script src="resources/js/levelThree.js"></script>
		<script src="resources/js/screen.js"></script>
		<script src="resources/js/text.js"></script>
		<script src="resources/js/animation.js"></script>
		<script src="resources/js/fade.js"></script>
		<script src="resources/js/bar.js"></script>
		<script src="resources/js/button.js"></script>
		<script src="resources/js/broom.js"></script>
		<script src="resources/js/runner.js"></script>
		<script src="resources/js/bush.js"></script>
		<script src="resources/js/rock.js"></script>
		<script src="resources/js/barrel.js"></script>
		<script src="resources/js/bat.js"></script>
		
		<script>
			var canvas = document.getElementById("canvas");
			var context = canvas.getContext("2d");
			
			var screen = new Screen();
			var manager = new Manager();
			var runner =  new Runner();
			var enemiesManager = new EnemiesManager();
			
			var keyDown = function(e) {
				switch (e.keyCode) {
					case 32:
						runner.jump();
						manager.clickSplashScreen();
						break;
						
					case 80:
						manager.clickPause();
						break;
						
					case 90:
						runner.hit();
						break;
				}
			}
			
			var mouseMove = function(e) {
				screen.optionsButton.mouseOver(e);
				screen.soundButton.mouseOver(e);
				screen.creditsButton.mouseOver(e);
				screen.playButton.mouseOver(e);
				screen.optionsMenuButton.mouseOver(e);
				screen.creditsMenuButton.mouseOver(e);
				screen.lossMenuButton.mouseOver(e);
				screen.lossGameButton.mouseOver(e);
				screen.pauseMenuButton.mouseOver(e);
			}
			
			var mouseClick = function(e) {
				screen.optionsButton.click(e);
				screen.soundButton.click(e);
				screen.creditsButton.click(e);
				screen.playButton.click(e);
				screen.optionsMenuButton.click(e);
				screen.creditsMenuButton.click(e);
				screen.lossMenuButton.click(e);
				screen.lossGameButton.click(e);
				screen.pauseMenuButton.click(e);
			}
			
			document.addEventListener("keydown", keyDown, true);
			document.addEventListener("click", mouseClick, false);
			document.addEventListener("mousemove", mouseMove, true);
			
			var loop = function() {
				manager.update();
				screen.draw();
				setTimeout(loop, 30);
			}

			loop();
		</script>
	</body>
</html>